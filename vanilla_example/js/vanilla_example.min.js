let van_glo={urlParams:new URLSearchParams(window.location.search),fault:0,reset:0,cur_state:null,timeout_id:null},van_game=null;function add_fault(){van_glo.fault?score_it(van_glo.cur_state.meta.receiver,DOUBLE_FAULT):(van_glo.fault++,redraw_e("fault_button","DOUBLE FAULT"))}function remove_fault(){van_glo.fault=0,redraw_e("fault_button","FAULT")}function redraw_e(e,t){document.getElementById(e).innerHTML=t}function redraw(){van_glo.cur_state=van_game.match_summary(),1==van_glo.urlParams.get("dancemode")&&redraw_e("wholeobj","<pre>"+JSON.stringify(van_game.match_summary(),null,2)+"\n"+JSON.stringify(van_game,null,2)+"</pre>"),redraw_e("warning",""),redraw_e("game_type",van_glo.cur_state.meta.type);let e=1;for(;e<=2;)redraw_e("player"+e,van_glo.cur_state.meta.player[e]),redraw_e("player"+e+"b",van_glo.cur_state.meta.player[e]),redraw_e("sets"+e,van_glo.cur_state[e].sets),redraw_e("games"+e,van_glo.cur_state[e].games),redraw_e("score"+e,van_glo.cur_state[e].points),e++;redraw_e("serving"+van_glo.cur_state.meta.server,"&#127934;"),redraw_e("serving"+van_glo.cur_state.meta.receiver,""),div_state("p_serving"+van_glo.cur_state.meta.server,"inline-block"),div_state("p_receiving"+van_glo.cur_state.meta.server,"none"),div_state("p_serving"+van_glo.cur_state.meta.receiver,"none"),div_state("p_receiving"+van_glo.cur_state.meta.receiver,"inline-block"),van_glo.cur_state.winner?(redraw_e("winner_name",van_glo.cur_state.meta.player[van_glo.cur_state.winner]),redraw_e("winner_score",van_glo.cur_state.match_score),redraw_e("serving"+van_glo.cur_state.meta.server,""),div_state("winner_table","block"),div_state("player1_buttons","none"),div_state("player2_buttons","none"),div_state("undo_serve","none")):(div_state("winner_table","none"),div_state("player1_buttons","block"),div_state("player2_buttons","block"))}function div_state(e,t){document.getElementById(e).style.display=t}function escape_html(e){var t=document.createElement("sane");return t.appendChild(document.createTextNode(e)),t.innerHTML}function init_match(){let e=escape_html(document.getElementById("p1_name").value),t=escape_html(document.getElementById("p2_name").value);if(""===e||""===t)return void redraw_e("warning","Must Name Each Player");let a=document.getElementById("num_sets").value;5!=a&&3!=a&&(a=1),van_game=new TennisMatch(e,document.getElementById("p2_name").value,a),redraw(),div_state("score_table","block"),div_state("undo_serve","block"),div_state("player1_buttons","block"),div_state("player2_buttons","block"),div_state("new_match","block"),div_state("get_players","none")}function score_it(e,t){let a=t||REGULAR;van_game.score_point(e,a,van_glo.fault),remove_fault(),redraw()}function remove_it(){if(van_glo.fault)return remove_fault();van_game.remove_point(),redraw()}function reset_match(){if(!van_glo.reset)return redraw_e("reset_button","PRESS AGAIN WITHIN 5s TO CONFIRM"),van_glo.reset=1,void(van_glo.timeout_id=setTimeout(function(){1===van_glo.reset&&(van_glo.reset=0,redraw_e("reset_button","Start New Match"))},5e3));clearTimeout(van_glo.timeout_id),van_game=null,van_glo.reset=0,div_state("score_table","none"),div_state("undo_serve","none"),div_state("player1_buttons","none"),div_state("player2_buttons","none"),div_state("new_match","none"),div_state("winner_table","none"),document.getElementById("p1_name").value="",document.getElementById("p2_name").value="",redraw_e("reset_button","Start New Match"),div_state("get_players","block")}